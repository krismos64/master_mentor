function submitFormAjax(e){e.preventDefault();document.querySelectorAll(".error-message").forEach(e=>{e.style.display="none",e.textContent=""});let t=!0;const n=document.getElementById("name"),o=document.getElementById("name-error");n.value.trim()?n.value.trim().length<2&&(o.textContent="Le nom doit contenir au moins 2 caractères",o.style.display="block",t=!1):(o.textContent="Le nom et prénom sont requis",o.style.display="block",t=!1);const r=document.getElementById("email"),s=document.getElementById("email-error");r.value.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.value.trim())||(s.textContent="Veuillez entrer un email valide",s.style.display="block",t=!1):(s.textContent="L'email est requis",s.style.display="block",t=!1);const l=document.getElementById("phone"),i=document.getElementById("phone-error"),a=l.value.trim();a?/^[0-9\s\+\-\.\(\)]{8,20}$/.test(a)||(i.textContent="Numéro invalide (minimum 8 chiffres)",i.style.display="block",t=!1):(i.textContent="Le téléphone est requis",i.style.display="block",t=!1);const c=document.getElementById("discipline"),d=document.getElementById("discipline-error");if(c.value||(d.textContent="Veuillez sélectionner une discipline",d.style.display="block",t=!1),!t)return!1;const u=document.getElementById("submit-btn"),m=u.textContent;u.disabled=!0,u.textContent="Envoi en cours...";const g=new FormData(e.target);return fetch("contact.php",{method:"POST",body:g}).then(e=>{if(!e.ok)throw new Error("Erreur réseau");return e.json()}).then(e=>{e.success?("undefined"!=typeof gtag&&gtag("event","conversion",{send_to:"VOTRE_ID_CONVERSION",value:1,currency:"EUR",event_category:"Form",event_label:"Contact Form Submitted"}),window.location.href="merci.html"):(alert(e.message||"Erreur lors de l'envoi. Veuillez réessayer."),u.disabled=!1,u.textContent=m)}).catch(e=>{console.error("Erreur:",e),alert("Erreur de connexion. Veuillez vérifier votre connexion internet et réessayer."),u.disabled=!1,u.textContent=m}),!1}const observerOptions={threshold:.1,rootMargin:"0px 0px -50px 0px"},observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.style.opacity="1",e.target.style.transform="translateY(0)")})},observerOptions);document.querySelectorAll(".discipline-card, .diff-card, .step, .testimonial-card").forEach(e=>{e.style.opacity="0",e.style.transform="translateY(30px)",e.style.transition="all 0.6s ease-out",observer.observe(e)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));t&&t.scrollIntoView({behavior:"smooth",block:"start"})})});let lastScroll=0,ticking=!1;const header=document.querySelector("header"),updateHeader=()=>{const e=window.pageYOffset;header.style.boxShadow=e>100?"0 4px 20px rgba(0,0,0,0.1)":"0 2px 10px rgba(0,0,0,0.1)",lastScroll=e,ticking=!1};window.addEventListener("scroll",()=>{ticking||(window.requestAnimationFrame(updateHeader),ticking=!0)},{passive:!0});const menuToggle=document.querySelector(".menu-toggle"),navLinks=document.querySelector(".nav-links"),body=document.body,toggleMenu=()=>{menuToggle.classList.toggle("active"),navLinks.classList.toggle("active"),body.classList.toggle("menu-open");const e=menuToggle.classList.contains("active");menuToggle.setAttribute("aria-expanded",e)},closeMenu=()=>{menuToggle.classList.remove("active"),navLinks.classList.remove("active"),body.classList.remove("menu-open"),menuToggle.setAttribute("aria-expanded","false")};menuToggle&&menuToggle.addEventListener("click",toggleMenu),navLinks&&navLinks.querySelectorAll("a").forEach(e=>{e.addEventListener("click",closeMenu)}),body.addEventListener("click",e=>{!body.classList.contains("menu-open")||navLinks.contains(e.target)||menuToggle.contains(e.target)||closeMenu()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&body.classList.contains("menu-open")&&closeMenu()});