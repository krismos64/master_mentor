function submitFormAjax(e){e.preventDefault();document.querySelectorAll(".error-message").forEach(e=>{e.style.display="none",e.textContent=""});let t=!0;const n=document.getElementById("name"),r=document.getElementById("name-error");n.value.trim()?n.value.trim().length<2&&(r.textContent="Le nom doit contenir au moins 2 caractères",r.style.display="block",t=!1):(r.textContent="Le nom et prénom sont requis",r.style.display="block",t=!1);const o=document.getElementById("email"),l=document.getElementById("email-error");o.value.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.value.trim())||(l.textContent="Veuillez entrer un email valide",l.style.display="block",t=!1):(l.textContent="L'email est requis",l.style.display="block",t=!1);const s=document.getElementById("phone"),i=document.getElementById("phone-error"),a=s.value.trim();a?/^[0-9\s\+\-\.\(\)]{8,20}$/.test(a)||(i.textContent="Numéro invalide (minimum 8 chiffres)",i.style.display="block",t=!1):(i.textContent="Le téléphone est requis",i.style.display="block",t=!1);const c=document.getElementById("discipline"),d=document.getElementById("discipline-error");if(c.value||(d.textContent="Veuillez sélectionner une discipline",d.style.display="block",t=!1),!t)return!1;const u=document.getElementById("submit-btn"),m=u.textContent;u.disabled=!0,u.textContent="Envoi en cours...";const y=new FormData(e.target);return fetch("contact.php",{method:"POST",body:y}).then(e=>{if(!e.ok)throw new Error("Erreur réseau");return e.json()}).then(e=>{e.success?("undefined"!=typeof gtag&&gtag("event","conversion",{send_to:"VOTRE_ID_CONVERSION",value:1,currency:"EUR",event_category:"Form",event_label:"Contact Form Submitted"}),window.location.href="merci.html"):(alert(e.message||"Erreur lors de l'envoi. Veuillez réessayer."),u.disabled=!1,u.textContent=m)}).catch(e=>{console.error("Erreur:",e),alert("Erreur de connexion. Veuillez vérifier votre connexion internet et réessayer."),u.disabled=!1,u.textContent=m}),!1}const observerOptions={threshold:.1,rootMargin:"0px 0px -50px 0px"},observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.style.opacity="1",e.target.style.transform="translateY(0)")})},observerOptions);document.querySelectorAll(".discipline-card, .diff-card, .step, .testimonial-card").forEach(e=>{e.style.opacity="0",e.style.transform="translateY(30px)",e.style.transition="all 0.6s ease-out",observer.observe(e)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));t&&t.scrollIntoView({behavior:"smooth",block:"start"})})});let lastScroll=0,ticking=!1;const header=document.querySelector("header"),updateHeader=()=>{const e=window.pageYOffset;header.style.boxShadow=e>100?"0 4px 20px rgba(0,0,0,0.1)":"0 2px 10px rgba(0,0,0,0.1)",lastScroll=e,ticking=!1};window.addEventListener("scroll",()=>{ticking||(window.requestAnimationFrame(updateHeader),ticking=!0)},{passive:!0});